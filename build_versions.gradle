ext {
    compileSdk = 34
    minSdk = 17
    targetSdk = 34
    versionCode = getVersionCode().toInteger()
    versionName = getVersionName().toString()

    hms = '3.4.62.300'
    mcs = '1.0.3.300'

    appcompact = '1.4.2'
    annotation = '1.3.0'
    junit = '4.13.2'
    android_junit = '1.0.0'
    espresso_core = '3.1.0'
}

def getVersionName() {
    try {
        def stdout = new ByteArrayOutputStream()
        exec {
            commandLine 'git', 'describe', '--tags'
            standardOutput = stdout
        }
        return stdout.toString().trim().takeBefore('-')
    } catch (ignored) {
        return "0.0.1"
    }
}

def getVersionCode() {
    def name = getVersionName()
    def code = 0
    name.split("\\.").each { code = code * 100 + it.toInteger() }
    return code
}